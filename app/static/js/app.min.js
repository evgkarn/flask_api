document.addEventListener("DOMContentLoaded",(function(){let t=document.querySelector("#carName"),e=document.querySelector("#carModel"),o=document.querySelector(".cityIp");!async function(){await fetch("http://free.ipwhois.io/json/?lang=ru",{method:"GET"}).then(t=>t.json()).then(t=>{o.innerHTML=t.city,console.log(t.city)})}(),async function(){let e=await fetch("http://evgkarn.pythonanywhere.com/todo/api/v1.0/auto",{method:"GET"});cars=await e.json(),carsOption=[],carsOption.push(cars.auto.map(t=>`<option value='${t}'>${t} </option>`)),console.log(carsOption);for(let e=0;e<carsOption.length;e++)t.innerHTML+=carsOption[e]}(),t.addEventListener("change",t=>{e.innerHTML="Выберите модель",async function(){let o="http://evgkarn.pythonanywhere.com/todo/api/v1.0/auto/"+t.target.value,n=await fetch(o,{method:"GET"});carsModel=await n.json(),modelOption=[],modelOption.push(carsModel.model.map(t=>`<option value='${t}'>${t} </option>`));for(let t=0;t<modelOption.length;t++)e.innerHTML+=modelOption[t]}()});let n=document.querySelectorAll(".ads-info p");for(let t=0;t<n.length;t++)console.log(n[t]),n[t].innerText=""+n[t].textContent.substr(0,60)}));